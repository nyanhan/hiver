<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	<script src="http://code.jquery.com/jquery-latest.js"></script>
  <link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />
<script type="text/javascript" src="qunit.js"></script>
<script type="text/javascript" src="./mix_up.js"></script>

  <script>

	function getMixed(){
		return $.getJSON("http://train.qunar.com/qunar/stationtostation.jsp?format=json&from=%E5%8C%97%E4%BA%AC&to=%E4%B8%8A%E6%B5%B7&type=oneway&date=20120209&ex_track=&callback=?");
	}

	function getRaw(){
		return $.getJSON("http://train.qunar.com/qunar/stationstation.jsp?format=js&from=%E5%8C%97%E4%BA%AC&to=%E4%B8%8A%E6%B5%B7&type=oneway&date=20120209&ex_track=&callback=?");
	}

	$.when(getRaw(), getMixed()).done(function(raw, mixed){
		var s = new QNR.mix_up();
		test("火车票价格混淆解析", function() {
			deepEqual(raw[0].ticketInfo, s.unpack(mixed[0].ticketInfo), "");
		});
	});

  </script>
  
</head>
<body>
  <h1 id="qunit-header">QUnit example</h1>
 <h2 id="qunit-banner"></h2>
 <div id="qunit-testrunner-toolbar"></div>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>
 <div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>
